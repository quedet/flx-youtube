{% load thumbnail %}

{% with request.user.channel as channel %}
    <div class="navbar">
        <div class="navbar--brand">
            <button class="navbar--brand-burger" data-action="click->slideover#toggle click@window->slideover#hide">
                <svg height="24" viewBox="0 0 24 24" width="24" focusable="false" style="pointer-events: none; display: block; width: 100%; height: 100%;"><path d="M21 6H3V5h18v1zm0 5H3v1h18v-1zm0 6H3v1h18v-1z"></path></svg>
            </button>
            <div class="navbar--brand-logo">
                <a href="{% url 'assets:index' %}" class="logo--icon">
                    <img height="25" alt="" class="style-scope ytcp-home-button" src="https://www.gstatic.com/youtube/img/creator/yt_studio_logo.svg">
                </a>
            </div>
        </div>
        <form method="post" class="navbar--search">
            <input type="text" placeholder="Search" class="w-full border-none px-4" />
            <button type="button" data-action="click->modal#open" class="border-l bg-gray-100 hover:bg-gray-100 px-4">
                <div class="flex items-center justify-center">
                    <div style="width: 100%; height: 100%; fill: currentcolor;"><svg height="24" viewBox="0 0 24 24" width="24" focusable="false" style="pointer-events: none; display: block; width: 100%; height: 100%;"><path d="m20.87 20.17-5.59-5.59C16.35 13.35 17 11.75 17 10c0-3.87-3.13-7-7-7s-7 3.13-7 7 3.13 7 7 7c1.75 0 3.35-.65 4.58-1.71l5.59 5.59.7-.71zM10 16c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6z"></path></svg></div>
                </div>
            </button>
        </form>
        <nav class="navbar--menu">
            <div data-controller="modal" data-action="keydown.esc->modal#close" tabindex="-1" class="relative z-10 navbar--menu-item navbar--menu-item-search">
                <button type="button" data-action="click->modal#open" class="p-2 hover:bg-gray-100 rounded-full flex items-center justify-center">
                    <div style="width: 100%; height: 100%; fill: currentcolor;"><svg enable-background="new 0 0 24 24" height="24" viewBox="0 0 24 24" width="24" focusable="false" style="pointer-events: none; display: block; width: 100%; height: 100%;"><path d="m20.87 20.17-5.59-5.59C16.35 13.35 17 11.75 17 10c0-3.87-3.13-7-7-7s-7 3.13-7 7 3.13 7 7 7c1.75 0 3.35-.65 4.58-1.71l5.59 5.59.7-.71zM10 16c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6z"></path></svg></div>
                </button>
                <!-- Modal Background -->
                    <div class="hidden fixed inset-0 bg-black bg-opacity-80 overflow-y-auto flex items-center justify-center"
                        data-modal-target="background"
                        data-action="click->modal#closeBackground"
                        data-transition-enter="transition-all ease-in-out duration-300"
                        data-transition-enter-from="bg-opacity-0"
                        data-transition-enter-to="bg-opacity-80"
                        data-transition-leave="transition-all ease-in-out duration-300"
                        data-transition-leave-from="bg-opacity-80"
                        data-transition-leave-to="bg-opacity-0">

                    <!-- Modal Container -->
                    <div data-modal-target="container" class="h-screen w-full max-w-xl relative">
                      <!-- Modal Card -->
                      <div class="bg-white rounded shadow h-full">
                        <div class="p-8">
                          <h2 class="text-xl mb-4">Large Modal Content</h2>
                          <p class="mb-4">This is an example modal dialog box.</p>

                          <div class="flex justify-end items-center flex-wrap mt-6">
                            <button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded" data-action="click->modal#close:prevent">Close</button>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="navbar--menu-item navbar--menu-item-help">
                    <a href="{% url 'studio:upload' request.user.channel.uid %}" class="flex items-center justify-center p-2 hover:bg-gray-100 rounded-full">
                        <svg viewBox="0 0 24 24" width="24" height="24" preserveAspectRatio="xMidYMid meet" focusable="false" class="style-scope tp-yt-iron-icon" style="pointer-events: none; display: block;"><g class="style-scope tp-yt-iron-icon"><path d="M15.36,9.96c0,1.09-0.67,1.67-1.31,2.24c-0.53,0.47-1.03,0.9-1.16,1.6L12.85,14h-1.75l0.03-0.28 c0.14-1.17,0.8-1.76,1.47-2.27c0.52-0.4,1.01-0.77,1.01-1.49c0-0.51-0.23-0.97-0.63-1.29c-0.4-0.31-0.92-0.42-1.42-0.29 c-0.59,0.15-1.05,0.67-1.19,1.34L10.32,10H8.57l0.06-0.42c0.2-1.4,1.15-2.53,2.42-2.87c1.05-0.29,2.14-0.08,2.98,0.57 C14.88,7.92,15.36,8.9,15.36,9.96z M12,18c0.55,0,1-0.45,1-1s-0.45-1-1-1s-1,0.45-1,1S11.45,18,12,18z M12,3c-4.96,0-9,4.04-9,9 s4.04,9,9,9s9-4.04,9-9S16.96,3,12,3 M12,2c5.52,0,10,4.48,10,10s-4.48,10-10,10S2,17.52,2,12S6.48,2,12,2L12,2z" class="style-scope tp-yt-iron-icon"></path></g></svg>
                    </a>
                </div>
                <div class="navbar--menu-item navbar--menu-item-video">
                    <a href="{% url 'studio:upload' request.user.channel.uid %}" class="flex items-center gap-2 justify-center px-3 text-sm py-1 hover:bg-gray-100 text-gray-500 border">
                        <svg width="24" height="24" viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" fill="#dc2626" focusable="false" class="style-scope tp-yt-iron-icon" style="pointer-events: none; display: block;"><g class="style-scope tp-yt-iron-icon"><path d="M14,13h-3v3H9v-3H6v-2h3V8h2v3h3V13z M17,6H3v12h14v-6.39l4,1.83V8.56l-4,1.83V6 M18,5v3.83L22,7v8l-4-1.83V19H2V5H18L18,5 z" class="style-scope tp-yt-iron-icon"></path></g></svg>
                        <span class="text-black font-semibold">CREATE</span>
                    </a>
                </div>
                <div class="navbar--menu-item navbar--menu-item-profile" data-controller="dropdown" data-action="click->dropdown#toggle click@window->dropdown#hide">
                    <div id="dropdown-button" class="relative flex items-center justify-center">
                    <div role="button" tabindex="0" data-dropdown-target="button" class="select-none px-2">
                        {% if channel.picture.cropped %}
                            <img src="{% thumbnail channel.picture.cropped 30x30 %}" alt="" class="rounded-full"/>
                        {% else %}
                            <img src="{% thumbnail channel.picture.original 30x30 crop %}" alt="" class="rounded-full"/>
                        {% endif %}
                    </div>
                    <div data-dropdown-target="menu"
                          data-transition-enter="transition ease-out duration-200"
                          data-transition-enter-from="opacity-0 translate-y-1"
                          data-transition-enter-to="opacity-100 translate-y-0"
                          data-transition-leave="transition ease-in duration-150"
                          data-transition-leave-from="opacity-100 translate-y-0"
                          data-transition-leave-to="opacity-0 translate-y-1"
                          class="hidden absolute top-5 right-0 z-20 mt-5 flex w-screen max-w-xs">
                      <div class="text-sm bg-white shadow-lg rounded border overflow-hidden w-full">
                        <a href="{{ request.user.channel.get_absolute_url }}" class='no-underline px-4 py-2 text-gray-900 bg-white hover:bg-gray-100 flex items-center gap-3'>
                            <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 256 256"><path fill="currentColor" d="M208 34H48a14 14 0 0 0-14 14v160a14 14 0 0 0 14 14h160a14 14 0 0 0 14-14V48a14 14 0 0 0-14-14ZM94 120a34 34 0 1 1 34 34a34 34 0 0 1-34-34Zm-28.23 90a66.43 66.43 0 0 1 20.77-29.36a66 66 0 0 1 82.92 0A66.43 66.43 0 0 1 190.23 210ZM210 208a2 2 0 0 1-2 2h-5.17a77.85 77.85 0 0 0-49.38-51.71a46 46 0 1 0-50.9 0A77.85 77.85 0 0 0 53.17 210H48a2 2 0 0 1-2-2V48a2 2 0 0 1 2-2h160a2 2 0 0 1 2 2Z"/></svg>
                            <span class="whitespace-no-wrap">Your channel</span>
                        </a>
                        <a href="{% url 'assets:index' %}" class='no-underline px-4 py-2 text-gray-900 bg-white hover:bg-gray-100 flex items-center gap-3'>
                            <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 48 48"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" d="M41.754 34.25L24 44.5L6.247 34.25v-20.5L24 3.5l17.754 10.25Z"/><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" d="M35.258 30.5L24 37l-11.258-6.5v-13L24 11l11.258 6.5Z"/><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" d="m20.764 29.03l8.488-5.013l-8.504-5.047Z"/></svg>
                            <span class="whitespace-no-wrap">YouTube</span>
                        </a>
                        <a href="#" class='no-underline px-4 py-2 text-gray-900 bg-white hover:bg-gray-100 flex items-center gap-3'>
                            <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 24 24"><path fill="currentColor" d="M14 11q1.25 0 2.125-.875T17 8q0-1.25-.875-2.125T14 5q-1.25 0-2.125.875T11 8q0 1.25.875 2.125T14 11Zm-6 4.75q1.125-1.325 2.7-2.038T14 13q1.725 0 3.3.713T20 15.75V4H8v11.75ZM6 18V2h16v16H6Zm-4 4V6h2v14h14v2H2ZM14 9q-.425 0-.713-.288T13 8q0-.425.288-.713T14 7q.425 0 .713.288T15 8q0 .425-.288.713T14 9Zm-3.3 7h6.6q-.725-.5-1.575-.75T14 15q-.875 0-1.725.25T10.7 16ZM14 9.875Z"/></svg>
                            <span class="whitespace-no-wrap">Switch account</span>
                        </a>
                        <a href="{% url 'accounts:logout' %}" class='no-underline px-4 py-2 text-gray-900 bg-white hover:bg-gray-100 flex items-center gap-3'>
                            <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 2048 2048"><path fill="currentColor" d="M256 1792h896v128H128V0h1024v128H256v1664zm1679-832l-487 488l-80-80l345-344H640V896h1073l-345-344l80-80l487 488z"/></svg>
                            <span class="whitespace-no-wrap">Sign out</span>
                        </a>
                        <a href="#" class='no-underline px-4 py-2 text-gray-900 bg-white hover:bg-gray-100 flex border-t items-center gap-3'>
                            <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 16 16"><path fill="currentColor" fill-rule="evenodd" d="m14.489 8.388l-.001.006a.115.115 0 0 1-.027.028a.428.428 0 0 1-.264.082h-3.186c-3.118 0-4.68 3.77-2.476 5.974a6.5 6.5 0 1 1 5.953-6.09Zm-.292 1.616c.913 0 1.736-.618 1.79-1.529a8 8 0 1 0-7.032 7.468c1.243-.147 1.527-1.639.641-2.525c-1.26-1.26-.367-3.414 1.415-3.414h3.186ZM10 5a1 1 0 1 1-2 0a1 1 0 0 1 2 0ZM6 7a1 1 0 1 0 0-2a1 1 0 0 0 0 2Zm0 2a1 1 0 1 1-2 0a1 1 0 0 1 2 0Z" clip-rule="evenodd"/></svg>
                            <span class="whitespace-no-wrap">Appearance: Device theme</span>
                        </a>
                        <a href="#" class='no-underline px-4 py-2 text-gray-900 bg-white hover:bg-gray-100 flex items-center gap-3'>
                            <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 24 24"><path fill="currentColor" d="M12 15q.425 0 .713-.288T13 14q0-.425-.288-.713T12 13q-.425 0-.713.288T11 14q0 .425.288.713T12 15Zm-1-4h2V5h-2v6ZM2 22V4q0-.825.588-1.413T4 2h16q.825 0 1.413.588T22 4v12q0 .825-.588 1.413T20 18H6l-4 4Zm3.15-6H20V4H4v13.125L5.15 16ZM4 16V4v12Z"/></svg>
                            <span class="whitespace-no-wrap">Send feedback</span>
                        </a>
                      </div>
                    </div>
                  </div>
                </div>
        </nav>
    </div>
{% endwith %}